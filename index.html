<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculate This B*tch | Supreme Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap');
        
        .calculator-shadow {
            box-shadow: 0 0 40px rgba(251, 146, 60, 0.3);
        }
        
        .dark .calculator-shadow {
            box-shadow: 0 0 40px rgba(109, 40, 217, 0.3);
        }
        
        .mode-transition * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        .heartbeat {
            animation: heartbeat 1.5s ease infinite;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .theme-pink {
            --primary: #ec4899;
            --secondary: #f472b6;
        }
        
        .theme-purple {
            --primary: #8b5cf6;
            --secondary: #a78bfa;
        }
        
        .theme-blue {
            --primary: #3b82f6;
            --secondary: #60a5fa;
        }
        
        .slide-in {
            animation: slideIn 0.5s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="font-['Poppins'] mode-transition bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md mx-auto">
        <!-- Header with title and theme selector -->
        <div class="flex justify-between items-center mb-4">
            <h1 class="text-2xl font-bold font-['Orbitron'] bg-gradient-to-r from-orange-400 to-orange-600 dark:from-purple-500 dark:to-purple-700 bg-clip-text text-transparent">
                Calculate This <span class="relative">
                    <span class="absolute -right-2 -top-2 text-xs">üî•</span>
                    B*tch
                </span>
            </h1>
            
            <div class="flex gap-2">
                <!-- Theme selector -->
                <div class="relative group">
                    <button id="theme-btn" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600">
                        <i class="fas fa-palette"></i>
                    </button>
                    <div class="absolute right-0 mt-2 w-32 origin-top-right bg-white dark:bg-gray-800 rounded-md shadow-lg z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                        <div class="p-2 grid grid-cols-3 gap-2">
                            <button onclick="changeTheme('pink')" class="h-6 w-6 rounded-full bg-pink-500 hover:ring-2 ring-pink-300"></button>
                            <button onclick="changeTheme('purple')" class="h-6 w-6 rounded-full bg-purple-500 hover:ring-2 ring-purple-300"></button>
                            <button onclick="changeTheme('blue')" class="h-6 w-6 rounded-full bg-blue-500 hover:ring-2 ring-blue-300"></button>
                        </div>
                    </div>
                </div>
                
                <!-- Dark mode toggle -->
                <button id="darkmode-toggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600">
                    <i class="fas fa-moon dark:hidden"></i>
                    <i class="fas fa-sun hidden dark:block"></i>
                </button>
            </div>
        </div>

        <!-- Mode selector -->
        <div class="flex mb-4 rounded-lg bg-gray-200 dark:bg-gray-800 p-1">
            <button id="basic-btn" class="flex-1 py-2 px-4 rounded-md font-medium bg-white dark:bg-gray-900">Basic</button>
            <button id="scientific-btn" class="flex-1 py-2 px-4 rounded-md font-medium">Scientific</button>
            <button id="love-btn" class="flex-1 py-2 px-4 rounded-md font-medium">
                <i class="fas fa-heart text-red-500"></i> Love
            </button>
        </div>

        <!-- Calculator screen -->
        <div class="mb-4 p2">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-inner border border-gray-300 dark:border-gray-700 overflow-hidden">
                <div id="history" class="text-right text-sm text-gray-500 dark:text-gray-400 h-5 overflow-hidden whitespace-nowrap"></div>
                <div id="display" class="text-right text-3xl font-['Orbitron'] font-medium overflow-x-auto scrollbar-hide whitespace-nowrap">0</div>
            </div>
        </div>

        <!-- Basic Calculator -->
        <div id="basic-calc" class="calculator-shadow bg-white dark:bg-gray-800 rounded-2xl p-4 border border-gray-300 dark:border-gray-700">
            <div class="grid grid-cols-4 gap-3 text-lg">
                <button class="operator bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-xl p-3 font-medium" data-value="C">C</button>
                <button class="operator bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-xl p-3 font-medium" data-value="¬±">¬±</button>
                <button class="operator bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-xl p-3 font-medium" data-value="%">%</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-xl p-3 text-white" data-value="/">/</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="7">7</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="8">8</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="9">9</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-xl p-3 text-white" data-value="*">√ó</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="4">4</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="5">5</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="6">6</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-xl p-3 text-white" data-value="-">‚àí</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="1">1</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="2">2</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value="3">3</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-xl p-3 text-white" data-value="+">+</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3 col-span-2" data-value="0">0</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl p-3" data-value=".">.</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-xl p-3 text-white" data-value="=">=</button>
            </div>
        </div>

        <!-- Scientific Calculator (hidden by default) -->
        <div id="scientific-calc" class="hidden calculator-shadow bg-white dark:bg-gray-800 rounded-2xl p-4 border border-gray-300 dark:border-gray-700">
            <div class="grid grid-cols-5 gap-2 text-sm">
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="sin">sin</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="cos">cos</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="tan">tan</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="log">log</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="ln">ln</button>

                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="sinh">sinh</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="cosh">cosh</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="tanh">tanh</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="‚àö">‚àö</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="^">^</button>

                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="(">(</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value=")">)</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="œÄ">œÄ</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="e">e</button>
                <button class="sci-operator bg-indigo-500 hover:bg-indigo-600 rounded-lg p-2 text-white" data-value="!">!</button>

                <button class="operator bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg p-2" data-value="C">C</button>
                <button class="operator bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg p-2" data-value="¬±">¬±</button>
                <button class="operator bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-lg p-2" data-value="%">%</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-lg p-2 text-white" data-value="/">/</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-lg p-2 text-white" data-value="*">√ó</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="7">7</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="8">8</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="9">9</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-lg p-2 text-white" data-value="-">‚àí</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-lg p-2 text-white" data-value="+">+</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="4">4</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="5">5</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="6">6</button>
                <button class="operator bg-orange-500 dark:bg-purple-600 hover:bg-orange-600 dark:hover:bg-purple-700 rounded-lg p-2 text-white col-span-2" data-value="=">=</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="1">1</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="2">2</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="3">3</button>

                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value="0">0</button>
                <button class="number bg-gray-100 dark:bg-gray-900 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg p-2" data-value=".">.</button>
            </div>
        </div>

        <!-- Love Calculator (hidden by default) -->
        <div id="love-calc" class="hidden p-4 calculator-shadow bg-white dark:bg-gray-800 rounded-2xl border border-gray-300 dark:border-gray-700">
            <h2 class="text-xl font-bold text-center mb-4 text-pink-500 dark:text-pink-400">‚ù§Ô∏è Love Compatibility ‚ù§Ô∏è</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Your Name</label>
                    <input type="text" id="name1" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-900" placeholder="Enter first name">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Your Crush</label>
                    <input type="text" id="name2" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-900" placeholder="Enter second name">
                </div>
                <button id="calculate-love" class="w-full py-3 bg-pink-500 hover:bg-pink-600 text-white rounded-lg font-medium heartbeat">
                    Calculate Love
                </button>
                <div id="love-result" class="text-center py-4 hidden">
                    <div class="text-4xl font-bold text-pink-500 mb-2"><span id="love-percent">0</span>%</div>
                    <div id="love-message" class="text-sm"></div>
                    <div class="mt-4 h-4 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                        <div id="love-meter" class="h-full bg-gradient-to-r from-pink-500 to-red-500" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History panel -->
        <div id="history-panel" class="mt-4 bg-white dark:bg-gray-800 rounded-xl p-4 shadow-inner border border-gray-300 dark:border-gray-700 max-h-40 overflow-y-auto hidden">
            <div class="flex justify-between items-center mb-2">
                <h3 class="font-medium">History</h3>
                <button id="clear-history" class="text-xs text-red-500 hover:text-red-700 dark:hover:text-red-400">Clear</button>
            </div>
            <div id="history-items" class="space-y-1 text-sm"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const display = document.getElementById('display');
            const history = document.getElementById('history');
            const basicCalc = document.getElementById('basic-calc');
            const scientificCalc = document.getElementById('scientific-calc');
            const loveCalc = document.getElementById('love-calc');
            const basicBtn = document.getElementById('basic-btn');
            const scientificBtn = document.getElementById('scientific-btn');
            const loveBtn = document.getElementById('love-btn');
            const darkmodeToggle = document.getElementById('darkmode-toggle');
            const historyPanel = document.getElementById('history-panel');
            const calculateLoveBtn = document.getElementById('calculate-love');
            const loveResult = document.getElementById('love-result');
            
            // Calculator state
            let currentValue = '0';
            let previousValue = '';
            let operation = '';
            let lastOperation = '';
            let resetScreen = false;
            let calculationHistory = JSON.parse(localStorage.getItem('calcHistory')) || [];
            
            // Initialize
            updateDisplay();
            renderHistory();
            
            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.documentElement.classList.add('dark');
            }
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.classList.add(`theme-${savedTheme}`);
                updateThemeColors(savedTheme);
            } else {
                updateThemeColors('purple');
            }
            
            // Event Listeners for Basic Calculator
            document.querySelectorAll('.number').forEach(button => {
                button.addEventListener('click', () => appendNumber(button.dataset.value));
            });
            
            document.querySelectorAll('.operator').forEach(button => {
                button.addEventListener('click', () => handleOperator(button.dataset.value));
            });
            
            document.querySelectorAll('.sci-operator').forEach(button => {
                button.addEventListener('click', () => handleScientific(button.dataset.value));
            });
            
            // Mode switching
            basicBtn.addEventListener('click', () => switchMode('basic'));
            scientificBtn.addEventListener('click', () => switchMode('scientific'));
            loveBtn.addEventListener('click', () => switchMode('love'));
            
            // Dark mode toggle
            darkmodeToggle.addEventListener('click', toggleDarkMode);
            
            // Love calculator
            calculateLoveBtn.addEventListener('click', calculateLove);
            
            // Keyboard support
            document.addEventListener('keydown', handleKeyboardInput);
            
            // Functions
            function updateDisplay() {
                display.textContent = currentValue;
            }
            
            function updateHistory() {
                if (previousValue && operation) {
                    history.textContent = `${previousValue} ${operation}`;
                } else {
                    history.textContent = '';
                }
            }
            
            function appendNumber(number) {
                if (currentValue === '0' || resetScreen) {
                    if (number === '.') {
                        currentValue = '0.';
                    } else {
                        currentValue = number;
                    }
                    resetScreen = false;
                } else {
                    if (number === '.' && currentValue.includes('.')) return;
                    currentValue += number;
                }
                updateDisplay();
            }
            
            function handleOperator(op) {
                if (op === 'C') {
                    resetCalculator();
                    return;
                }
                
                if (op === '¬±') {
                    currentValue = (parseFloat(currentValue) * -1).toString();
                    updateDisplay();
                    return;
                }
                
                if (op === '%') {
                    currentValue = (parseFloat(currentValue) / 100).toString();
                    updateDisplay();
                    return;
                }
                
                if (currentValue === '0' && previousValue === '') return;
                
                if (op === '=') {
                    if (!operation) return;
                    
                    const result = calculate();
                    addToHistory(`${previousValue} ${operation} ${currentValue} = ${result}`);
                    currentValue = result;
                    previousValue = '';
                    operation = '';
                    lastOperation = '=';
                    resetScreen = true;
                    updateDisplay();
                    updateHistory();
                    renderHistory();
                    return;
                }
                
                if (previousValue === '') {
                    previousValue = currentValue;
                } else if (!resetScreen) {
                    const result = calculate();
                    currentValue = result;
                    previousValue = result;
                }
                
                operation = op;
                lastOperation = op;
                resetScreen = true;
                updateDisplay();
                updateHistory();
            }
            
            function handleScientific(func) {
                let value = parseFloat(currentValue);
                let result;
                
                switch(func) {
                    case 'sin':
                        result = Math.sin(value * Math.PI / 180);
                        break;
                    case 'cos':
                        result = Math.cos(value * Math.PI / 180);
                        break;
                    case 'tan':
                        result = Math.tan(value * Math.PI / 180);
                        break;
                    case 'sinh':
                        result = Math.sinh(value);
                        break;
                    case 'cosh':
                        result = Math.cosh(value);
                        break;
                    case 'tanh':
                        result = Math.tanh(value);
                        break;
                    case 'log':
                        result = Math.log10(value);
                        break;
                    case 'ln':
                        result = Math.log(value);
                        break;
                    case '‚àö':
                        result = Math.sqrt(value);
                        break;
                    case '^':
                        operation = '^';
                        previousValue = currentValue;
                        currentValue = '0';
                        resetScreen = true;
                        updateDisplay();
                        updateHistory();
                        return;
                    case '(':
                    case ')':
                        // For future implementation of full expression parsing
                        appendNumber(func);
                        return;
                    case 'œÄ':
                        currentValue = Math.PI.toString();
                        updateDisplay();
                        return;
                    case 'e':
                        currentValue = Math.E.toString();
                        updateDisplay();
                        return;
                    case '!':
                        result = factorial(value);
                        break;
                    default:
                        return;
                }
                
                if (isNaN(result)) {
                    currentValue = 'Error';
                } else {
                    // Show the operation in history
                    addToHistory(`${func}(${value}) = ${result}`);
                    currentValue = result.toString();
                }
                
                resetScreen = true;
                updateDisplay();
                renderHistory();
            }
            
            function factorial(n) {
                if (n < 0) return NaN;
                if (n === 0 || n === 1) return 1;
                let result = 1;
                for (let i = 2; i <= n; i++) {
                    result *= i;
                }
                return result;
            }
            
            function calculate() {
                const prev = parseFloat(previousValue);
                const current = parseFloat(currentValue);
                
                if (isNaN(prev) || isNaN(current)) return '0';
                
                let result;
                switch(operation) {
                    case '+':
                        result = prev + current;
                        break;
                    case '-':
                        result = prev - current;
                        break;
                    case '*':
                        result = prev * current;
                        break;
                    case '/':
                        result = prev / current;
                        break;
                    case '^':
                        result = Math.pow(prev, current);
                        break;
                    default:
                        return current;
                }
                
                // Round to handle floating point precision issues
                return Math.round(result * 100000000) / 100000000;
            }
            
            function resetCalculator() {
                currentValue = '0';
                previousValue = '';
                operation = '';
                lastOperation = '';
                resetScreen = false;
                updateDisplay();
                updateHistory();
            }
            
            function addToHistory(entry) {
                calculationHistory.unshift(entry);
                if (calculationHistory.length > 10) {
                    calculationHistory.pop();
                }
                localStorage.setItem('calcHistory', JSON.stringify(calculationHistory));
            }
            
            function renderHistory() {
                const historyItems = document.getElementById('history-items');
                historyItems.innerHTML = '';
                
                if (calculationHistory.length > 0) {
                    historyPanel.classList.remove('hidden');
                    calculationHistory.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'flex justify-between';
                        
                        const calcDiv = document.createElement('div');
                        calcDiv.className = 'truncate pr-2';
                        calcDiv.textContent = item.split(' = ')[0];
                        
                        const resultDiv = document.createElement('div');
                        resultDiv.className = 'font-medium text-orange-500 dark:text-purple-400';
                        resultDiv.textContent = item.split(' = ')[1];
                        
                        div.appendChild(calcDiv);
                        div.appendChild(resultDiv);
                        historyItems.appendChild(div);
                    });
                } else {
                    historyPanel.classList.add('hidden');
                }
            }
            
            document.getElementById('clear-history').addEventListener('click', () => {
                calculationHistory = [];
                localStorage.setItem('calcHistory', JSON.stringify(calculationHistory));
                renderHistory();
            });
            
            function switchMode(mode) {
                basicCalc.classList.add('hidden');
                scientificCalc.classList.add('hidden');
                loveCalc.classList.add('hidden');
                historyPanel.classList.add('hidden');
                
                basicBtn.classList.remove('bg-white', 'dark:bg-gray-900');
                scientificBtn.classList.remove('bg-white', 'dark:bg-gray-900');
                loveBtn.classList.remove('bg-white', 'dark:bg-gray-900');
                
                switch(mode) {
                    case 'basic':
                        basicCalc.classList.remove('hidden');
                        basicBtn.classList.add('bg-white', 'dark:bg-gray-900');
                        if (calculationHistory.length > 0) historyPanel.classList.remove('hidden');
                        break;
                    case 'scientific':
                        scientificCalc.classList.remove('hidden');
                        scientificBtn.classList.add('bg-white', 'dark:bg-gray-900');
                        break;
                    case 'love':
                        loveCalc.classList.remove('hidden');
                        loveBtn.classList.add('bg-white', 'dark:bg-gray-900');
                        break;
                }
            }
            
            function toggleDarkMode() {
                const html = document.documentElement;
                html.classList.toggle('dark');
                
                if (html.classList.contains('dark')) {
                    localStorage.setItem('darkMode', 'enabled');
                } else {
                    localStorage.setItem('darkMode', 'disabled');
                }
            }
            
            function calculateLove() {
                const name1 = document.getElementById('name1').value.trim();
                const name2 = document.getElementById('name2').value.trim();
                
                if (!name1 || !name2) {
                    alert("Please enter both names!");
                    return;
                }
                
                // Simple love calculation algorithm (for fun)
                const combined = (name1 + name2).toLowerCase();
                let sum = 0;
                
                for (let i = 0; i < combined.length; i++) {
                    sum += combined.charCodeAt(i);
                }
                
                const lovePercent = sum % 101; // Ensure 0-100
                
                // Animate the result
                const lovePercentElement = document.getElementById('love-percent');
                const loveMeter = document.getElementById('love-meter');
                const loveMessage = document.getElementById('love-message');
                
                let percent = 0;
                const interval = setInterval(() => {
                    if (percent >= lovePercent) {
                        clearInterval(interval);
                    } else {
                        percent++;
                        lovePercentElement.textContent = percent;
                        loveMeter.style.width = `${percent}%`;
                        
                        // Different messages based on percentage
                        if (percent < 30) {
                            loveMessage.textContent = "Not a great match... Maybe try again with someone else? üëÄ";
                        } else if (percent < 50) {
                            loveMessage.textContent = "There's some potential here, but it needs work!";
                        } else if (percent < 70) {
                            loveMessage.textContent = "Good match! This could work out well!";
                        } else if (percent < 90) {
                            loveMessage.textContent = "Great match! You two are meant for each other!";
                        } else {
                            loveMessage.textContent = "Perfect match! Soulmates! ‚ù§Ô∏èüî•";
                        }
                    }
                }, 30);
                
                loveResult.classList.remove('hidden');
                loveResult.classList.add('slide-in');
            }
            
            function handleKeyboardInput(e) {
                if (/[0-9.]/.test(e.key)) {
                    appendNumber(e.key);
                } else if (e.key === 'Escape') {
                    resetCalculator();
                } else if (e.key === 'Backspace') {
                    if (currentValue.length === 1 || (currentValue.length === 2 && currentValue.startsWith('-'))) {
                        currentValue = '0';
                    } else {
                        currentValue = currentValue.slice(0, -1);
                    }
                    updateDisplay();
                } else if (['+', '-', '*', '/', '%'].includes(e.key)) {
                    handleOperator(e.key);
                } else if (e.key === 'Enter' || e.key === '=') {
                    handleOperator('=');
                } else if (e.key === '(' || e.key === ')') {
                    handleScientific(e.key);
                } else if (e.key === '^') {
                    handleScientific('^');
                }
            }
            
            function changeTheme(theme) {
                // Remove existing theme classes
                document.documentElement.classList.remove('theme-pink', 'theme-purple', 'theme-blue');
                
                // Add new theme class and update localStorage
                document.documentElement.classList.add(`theme-${theme}`);
                localStorage.setItem('theme', theme);
                
                updateThemeColors(theme);
            }
            
            function updateThemeColors(theme) {
                const root = document.documentElement;
                
                switch(theme) {
                    case 'pink':
                        root.style.setProperty('--primary', '#ec4899');
                        root.style.setProperty('--secondary', '#f472b6');
                        break;
                    case 'purple':
                        root.style.setProperty('--primary', '#8b5cf6');
                        root.style.setProperty('--secondary', '#a78bfa');
                        break;
                    case 'blue':
                        root.style.setProperty('--primary', '#3b82f6');
                        root.style.setProperty('--secondary', '#60a5fa');
                        break;
                }
            }
        });
    </script>
</body>
</html>
